scripted_gui = {

	tpt_main_container = {

		context_type = selected_country_context

		window_name = "tpt_main_container"

		visible = {
			ROOT = {
				is_ai = no
				has_global_flag = tpt_enabled
			}
		}

		effects = {
			tpt_tab_button_frame_1a_click = {
				set_global_flag = tpt_window_a
				clr_global_flag = tpt_window_b
				clr_global_flag = tpt_window_c
				clr_global_flag = tpt_window_d
				clr_global_flag = tpt_window_e
			}
			tpt_tab_button_frame_1b_click = {
				set_global_flag = tpt_window_b
				clr_global_flag = tpt_window_a
				clr_global_flag = tpt_window_c
				clr_global_flag = tpt_window_d
				clr_global_flag = tpt_window_e
			}
			tpt_tab_button_frame_1c_click = {
				clr_global_flag = tpt_window_b
				clr_global_flag = tpt_window_a
				set_global_flag = tpt_window_c
				clr_global_flag = tpt_window_d
				clr_global_flag = tpt_window_e
			}
			tpt_tab_button_frame_1d_click = {
				clr_global_flag = tpt_window_b
				clr_global_flag = tpt_window_a
				clr_global_flag = tpt_window_c
				set_global_flag = tpt_window_d
				clr_global_flag = tpt_window_e
			}
			tpt_tab_button_frame_1e_click = {
				clr_global_flag = tpt_window_b
				clr_global_flag = tpt_window_a
				clr_global_flag = tpt_window_c
				clr_global_flag = tpt_window_d
				set_global_flag = tpt_window_e
			}
			tpt_tab_switch_button_click = {
				if = {
					limit = { has_global_flag = tpt_window_e }
					clr_global_flag = tpt_window_e
					set_global_flag = tpt_window_a
					set_global_flag = tpt_window_stop
				}
				if = {
					limit = { has_global_flag = tpt_window_d }
					clr_global_flag = tpt_window_d
					set_global_flag = tpt_window_e
				}
				if = {
					limit = { has_global_flag = tpt_window_c }
					clr_global_flag = tpt_window_c
					set_global_flag = tpt_window_d
				}
				if = {
					limit = { has_global_flag = tpt_window_b }
					clr_global_flag = tpt_window_b
					set_global_flag = tpt_window_c
				}
				if = {
					limit = {
						has_global_flag = tpt_window_a
						NOT = { has_global_flag = tpt_window_stop }
					}
					clr_global_flag = tpt_window_a
					set_global_flag = tpt_window_b
				}
				clr_global_flag = tpt_window_stop
			}
			tpt_marker_click = {
				set_country_flag = tpt_actor
			}
			tpt_unmarker_click = {
				clr_country_flag = tpt_actor
			}
			tpt_unmark_all_click = {
				every_country = {
					limit = { has_country_flag = tpt_actor }
					clr_country_flag = tpt_actor
				}
			}
			tpt_mark_ideology_click = {
				if = {
					limit = { has_government = elites }
					every_country = {
						limit = { has_government = elites }
						set_country_flag = tpt_actor
					}
				}
				if = {
					limit = { has_government = intellectuals }
					every_country = {
						limit = { has_government = intellectuals }
						set_country_flag = tpt_actor
					}
				}
				if = {
					limit = { has_government = people }
					every_country = {
						limit = { has_government = people }
						set_country_flag = tpt_actor
					}
				}
				if = {
					limit = { has_government = ruler }
					every_country = {
						limit = { has_government = ruler }
						set_country_flag = tpt_actor
					}
				}
			}
### RESEARCH ###

			tpt_remove_rs_slot_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = original_amount_rs_slots }
						}
						set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
						set_country_flag = original_amount_rs_slots
					}
					add_research_slot = -1
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								NOT = { has_country_flag = original_amount_rs_slots }
							}
							set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
							set_country_flag = original_amount_rs_slots
						}
						add_research_slot = -1
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_remove_rs_slot_shift_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = original_amount_rs_slots }
						}
						set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
						set_country_flag = original_amount_rs_slots
					}
					add_research_slot = -5
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								NOT = { has_country_flag = original_amount_rs_slots }
							}
							set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
							set_country_flag = original_amount_rs_slots
						}
						add_research_slot = -5
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_rs_slot_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = original_amount_rs_slots }
						}
						set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
						set_country_flag = original_amount_rs_slots
					}
					add_research_slot = 1
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								NOT = { has_country_flag = original_amount_rs_slots }
							}
							set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
							set_country_flag = original_amount_rs_slots
						}
						add_research_slot = 1
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_rs_slot_shift_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = original_amount_rs_slots }
						}
						set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
						set_country_flag = original_amount_rs_slots
					}
					add_research_slot = 5
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								NOT = { has_country_flag = original_amount_rs_slots }
							}
							set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
							set_country_flag = original_amount_rs_slots
						}
						add_research_slot = 5
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_set_0_rs_slots_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = original_amount_rs_slots }
						}
						set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
						set_country_flag = original_amount_rs_slots
					}
					set_research_slots = 0
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								NOT = { has_country_flag = original_amount_rs_slots }
							}
							set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
							set_country_flag = original_amount_rs_slots
						}
						set_research_slots = 0
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_set_100_rs_slots_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = original_amount_rs_slots }
						}
						set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
						set_country_flag = original_amount_rs_slots
					}
					set_research_slots = 100
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								NOT = { has_country_flag = original_amount_rs_slots }
							}
							set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
							set_country_flag = original_amount_rs_slots
						}
						set_research_slots = 100
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_reset_rs_slots_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = original_amount_rs_slots }
						}
						set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
						set_country_flag = original_amount_rs_slots
					}
					set_research_slots = original_amount_rs_slots
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								NOT = { has_country_flag = original_amount_rs_slots }
							}
							set_variable = { THIS.original_amount_rs_slots = THIS.amount_research_slots }
							set_country_flag = original_amount_rs_slots
						}
						set_research_slots = original_amount_rs_slots
						clr_country_flag = tpt_actor
					}
				}
			}
### COUNTRY ###
			tpt_add_elites_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_elites_nation }
						}
						add_ideas = tp_elites_nation
						else = { remove_ideas = tp_elites_nation }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_elites_nation }
						}
						add_ideas = tp_elites_nation
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_elites_nation
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_ban_elites_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_elites_banned }
						}
						add_ideas = tp_elites_banned
						else = { remove_ideas = tp_elites_banned }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_elites_banned }
						}
						add_ideas = tp_elites_banned
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_elites_banned
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_intellectuals_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_intellectuals_nation }
						}
						add_ideas = tp_intellectuals_nation
						else = { remove_ideas = tp_intellectuals_nation }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_intellectuals_nation }
						}
						add_ideas = tp_intellectuals_nation
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_intellectuals_nation
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_ban_intellectuals_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_intellectuals_banned }
						}
						add_ideas = tp_intellectuals_banned
						else = { remove_ideas = tp_intellectuals_banned }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_intellectuals_banned }
						}
						add_ideas = tp_intellectuals_banned
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_intellectuals_banned
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_people_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_people_nation }
						}
						add_ideas = tp_people_nation
						else = { remove_ideas = tp_people_nation }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_people_nation }
						}
						add_ideas = tp_people_nation
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_people_nation
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_ban_people_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_people_banned }
						}
						add_ideas = tp_people_banned
						else = { remove_ideas = tp_people_banned }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_people_banned }
						}
						add_ideas = tp_people_banned
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_people_banned
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_ruler_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_ruler_nation }
						}
						add_ideas = tp_ruler_nation
						else = { remove_ideas = tp_ruler_nation }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_ruler_nation }
						}
						add_ideas = tp_ruler_nation
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_ruler_nation
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_ban_ruler_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_idea = tp_ruler_banned }
						}
						add_ideas = tp_ruler_banned
						else = { remove_ideas = tp_ruler_banned }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
							NOT = { has_idea = tp_ruler_banned }
						}
						add_ideas = tp_ruler_banned
						every_other_country = {
							limit = { has_country_flag = tpt_actor }
							remove_ideas = tp_ruler_banned
							clr_country_flag = tpt_actor
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_elites_on_click = {
				set_global_flag = tpt_elites
			}
			tpt_elites_off_click = {
				clr_global_flag = tpt_elites
			}
			tpt_intellectuals_on_click = {
				set_global_flag = tpt_intellectuals
			}
			tpt_intellectuals_off_click = {
				clr_global_flag = tpt_intellectuals
			}
			tpt_people_on_click = {
				set_global_flag = tpt_people
			}
			tpt_people_off_click = {
				clr_global_flag = tpt_people
			}
			tpt_ruler_on_click = {
				set_global_flag = tpt_ruler
			}
			tpt_ruler_off_click = {
				clr_global_flag = tpt_ruler
			}
			tpt_enable_elections_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					set_politics = {
						elections_allowed = yes
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
						}
						set_politics = {
							elections_allowed = yes
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_disable_elections_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					set_politics = {
						elections_allowed = no
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = {
							has_country_flag = tpt_actor
						}
						set_politics = {
							elections_allowed = no
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_change_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_elites
						}
						set_politics = { ruling_party = elites }
					}
					if = {
						limit = {
							has_global_flag = tpt_intellectuals
						}
						set_politics = { ruling_party = intellectuals }
					}
					if = {
						limit = {
							has_global_flag = tpt_people
						}
						set_politics = { ruling_party = people }
					}
					if = {
						limit = {
							has_global_flag = tpt_ruler
						}
						set_politics = { ruling_party = ruler }
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								has_global_flag = tpt_elites
							}
							set_politics = { ruling_party = elites }
						}
						if = {
							limit = {
								has_global_flag = tpt_intellectuals
							}
							set_politics = { ruling_party = intellectuals }
						}
						if = {
							limit = {
								has_global_flag = tpt_people
							}
							set_politics = { ruling_party = people }
						}
						if = {
							limit = {
								has_global_flag = tpt_ruler
							}
							set_politics = { ruling_party = ruler }
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_5_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_elites
						}
						add_popularity = {
							ideology = elites
							popularity = 0.05
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_intellectuals
						}
						add_popularity = {
							ideology = intellectuals
							popularity = 0.05
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_people
						}
						add_popularity = {
							ideology = people
							popularity = 0.05
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_ruler
						}
						add_popularity = {
							ideology = ruler
							popularity = 0.05
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								has_global_flag = tpt_elites
							}
							add_popularity = {
								ideology = elites
								popularity = 0.05
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_intellectuals
							}
							add_popularity = {
								ideology = intellectuals
								popularity = 0.05
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_people
							}
							add_popularity = {
								ideology = people
								popularity = 0.05
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_ruler
							}
							add_popularity = {
								ideology = ruler
								popularity = 0.05
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_subtract_5_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_elites
						}
						add_popularity = {
							ideology = elites
							popularity = -0.05
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_intellectuals
						}
						add_popularity = {
							ideology = intellectuals
							popularity = -0.05
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_people
						}
						add_popularity = {
							ideology = people
							popularity = -0.05
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_ruler
						}
						add_popularity = {
							ideology = ruler
							popularity = -0.05
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								has_global_flag = tpt_elites
							}
							add_popularity = {
								ideology = elites
								popularity = -0.05
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_intellectuals
							}
							add_popularity = {
								ideology = intellectuals
								popularity = -0.05
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_people
							}
							add_popularity = {
								ideology = people
								popularity = -0.05
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_ruler
							}
							add_popularity = {
								ideology = ruler
								popularity = -0.05
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_10_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_elites
						}
						add_popularity = {
							ideology = elites
							popularity = 0.10
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_intellectuals
						}
						add_popularity = {
							ideology = intellectuals
							popularity = 0.10
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_people
						}
						add_popularity = {
							ideology = people
							popularity = 0.10
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_ruler
						}
						add_popularity = {
							ideology = ruler
							popularity = 0.10
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								has_global_flag = tpt_elites
							}
							add_popularity = {
								ideology = elites
								popularity = 0.10
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_intellectuals
							}
							add_popularity = {
								ideology = intellectuals
								popularity = 0.10
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_people
							}
							add_popularity = {
								ideology = people
								popularity = 0.10
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_ruler
							}
							add_popularity = {
								ideology = ruler
								popularity = 0.10
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_subtract_10_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_elites
						}
						add_popularity = {
							ideology = elites
							popularity = -0.10
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_intellectuals
						}
						add_popularity = {
							ideology = intellectuals
							popularity = -0.10
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_people
						}
						add_popularity = {
							ideology = people
							popularity = -0.10
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_ruler
						}
						add_popularity = {
							ideology = ruler
							popularity = -0.10
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								has_global_flag = tpt_elites
							}
							add_popularity = {
								ideology = elites
								popularity = -0.10
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_intellectuals
							}
							add_popularity = {
								ideology = intellectuals
								popularity = -0.10
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_people
							}
							add_popularity = {
								ideology = people
								popularity = -0.10
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_ruler
							}
							add_popularity = {
								ideology = ruler
								popularity = -0.10
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_50_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_elites
						}
						add_popularity = {
							ideology = elites
							popularity = 0.50
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_intellectuals
						}
						add_popularity = {
							ideology = intellectuals
							popularity = 0.50
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_people
						}
						add_popularity = {
							ideology = people
							popularity = 0.50
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_ruler
						}
						add_popularity = {
							ideology = ruler
							popularity = 0.50
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								has_global_flag = tpt_elites
							}
							add_popularity = {
								ideology = elites
								popularity = 0.50
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_intellectuals
							}
							add_popularity = {
								ideology = intellectuals
								popularity = 0.50
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_people
							}
							add_popularity = {
								ideology = people
								popularity = 0.50
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_ruler
							}
							add_popularity = {
								ideology = ruler
								popularity = 0.50
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_subtract_50_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_elites
						}
						add_popularity = {
							ideology = elites
							popularity = -0.50
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_intellectuals
						}
						add_popularity = {
							ideology = intellectuals
							popularity = -0.50
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_people
						}
						add_popularity = {
							ideology = people
							popularity = -0.50
						}
					}
					if = {
						limit = {
							has_global_flag = tpt_ruler
						}
						add_popularity = {
							ideology = ruler
							popularity = -0.50
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						if = {
							limit = {
								has_global_flag = tpt_elites
							}
							add_popularity = {
								ideology = elites
								popularity = -0.50
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_intellectuals
							}
							add_popularity = {
								ideology = intellectuals
								popularity = -0.50
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_people
							}
							add_popularity = {
								ideology = people
								popularity = -0.50
							}
						}
						if = {
							limit = {
								has_global_flag = tpt_ruler
							}
							add_popularity = {
								ideology = ruler
								popularity = -0.50
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
### DIPLOMACY ###
			tpt_guarantee_click = {
				custom_effect_tooltip = TPT_GUARANTEE
				every_country = {
					limit = { has_country_flag = tpt_actor }
					give_guarantee = FROM
					clr_country_flag = tpt_actor
				}
			}
			tpt_no_guarantee_click = {
				custom_effect_tooltip = TPT_UNGUARANTEE
				every_country = {
					limit = { has_country_flag = tpt_actor }
					diplomatic_relation = {
						country = FROM
						relation = guarantee
						active = no
					}
					clr_country_flag = tpt_actor
				}
			}
			tpt_remove_all_guarantees_click = {
				custom_effect_tooltip = TPT_REMOVE_ALL_GUARANTEES
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					every_country = {
						diplomatic_relation = {
							country = FROM
							relation = guarantee
							active = no
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						every_country = {
							diplomatic_relation = {
								country = PREV
								relation = guarantee
								active = no
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_access_click = {
				custom_effect_tooltip = TPT_ACCESS
				every_country = {
					limit = { has_country_flag = tpt_actor }
					FROM = { give_military_access = PREV }
					clr_country_flag = tpt_actor
				}
			}
			tpt_no_access_click = {
				custom_effect_tooltip = TPT_UNACCESS
				every_country = {
					limit = { has_country_flag = tpt_actor }
					FROM = {
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
					clr_country_flag = tpt_actor
				}
			}
			tpt_remove_all_access_click = {
				custom_effect_tooltip = TPT_REMOVE_ALL_ACCESS
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					every_country = {
						diplomatic_relation = {
							country = FROM
							relation = military_access
							active = no
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						every_country = {
							diplomatic_relation = {
								country = PREV
								relation = military_access
								active = no
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_nap_click = {
				custom_effect_tooltip = TPT_NAP
				every_country = {
					limit = { has_country_flag = tpt_actor }
					FROM = {
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = yes
						}
					}
					clr_country_flag = tpt_actor
				}
			}
			tpt_no_nap_click = {
				custom_effect_tooltip = TPT_UNNAP
				every_country = {
					limit = { has_country_flag = tpt_actor }
					FROM = {
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
					}
					diplomatic_relation = {
						country = FROM
						relation = non_aggression_pact
						active = no
					}
					clr_country_flag = tpt_actor
				}
			}
			tpt_remove_all_naps_click = {
				custom_effect_tooltip = TPT_REMOVE_ALL_NAPS
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					every_country = {
						diplomatic_relation = {
							country = FROM
							relation = non_aggression_pact
							active = no
						}
						FROM = {
							diplomatic_relation = {
								country = PREV
								relation = non_aggression_pact
								active = no
							}
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						every_country = {
							diplomatic_relation = {
								country = PREV
								relation = non_aggression_pact
								active = no
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_decrease_opinion_click = {
				if = {
					limit = {
						check_variable = { global.tpt_op_value > -100 }
					}
					subtract_from_variable = {
						var = global.tpt_op_value
						value = 10
					}
				}
				if = {
					limit = {
						check_variable = { global.tpt_op_value = 0 }
					}
					subtract_from_variable = {
						var = global.tpt_op_value
						value = 10
					}
				}
			}
			tpt_increase_opinion_click = {
				if = {
					limit = {
						check_variable = { global.tpt_op_value < 100 }
					}
					add_to_variable = {
						var = global.tpt_op_value
						value = 10
					}
				}
				if = {
					limit = {
						check_variable = { global.tpt_op_value = 0 }
					}
					add_to_variable = {
						var = global.tpt_op_value
						value = 10
					}
				}
			}
			tpt_op_on_click = {
				clr_global_flag = tpt_op_turned_off
			}
			tpt_op_off_click = {
				set_global_flag = tpt_op_turned_off
			}
			tpt_trade_on_click = {
				clr_global_flag = tpt_trade_turned_off
			}
			tpt_trade_off_click = {
				set_global_flag = tpt_trade_turned_off
			}
			tpt_decrease_trade_click = {
				if = {
					limit = {
						check_variable = { global.tpt_trade_value > -100 }
					}
					subtract_from_variable = {
						var = global.tpt_trade_value
						value = 10
					}
				}
				if = {
					limit = {
						check_variable = { global.tpt_trade_value = 0 }
					}
					subtract_from_variable = {
						var = global.tpt_trade_value
						value = 10
					}
				}
			}
			tpt_increase_trade_click = {
				if = {
					limit = {
						check_variable = { global.tpt_trade_value < 100 }
					}
					add_to_variable = {
						var = global.tpt_trade_value
						value = 10
					}
				}
				if = {
					limit = {
						check_variable = { global.tpt_trade_value = 0 }
					}
					add_to_variable = {
						var = global.tpt_trade_value
						value = 10
					}
				}
			}
### STANCE ###
			tpt_war_button_click = {
				custom_effect_tooltip = TPT_WAR
				every_country = {
					limit = { has_country_flag = tpt_actor }
					declare_war_on = {
						target = FROM
						type = annex_everything
					}
					clr_country_flag = tpt_actor
				}
			}
			tpt_peace_button_click = {
				custom_effect_tooltip = TPT_PEACE
				every_country = {
					limit = { has_country_flag = tpt_actor }
					white_peace = FROM
					clr_country_flag = tpt_actor
				}
			}
			tpt_truce_button_click = {
				custom_effect_tooltip = TPT_TRUCE
				every_country = {
					limit = { has_country_flag = tpt_actor }
					set_truce = {
						target = FROM
						days = 90
					}
					clr_country_flag = tpt_actor
				}
			}

			tpt_cw_button_shift_click = {
				if = {
					limit = {
						NOT = { has_global_flag = tpt_cw_window_open }
					}
					set_global_flag = tpt_cw_window_open
					else = { clr_global_flag = tpt_cw_window_open }
				}
			}
			tpt_cw_button_click = {
				custom_effect_tooltip = TPT_CW
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = { has_government = people }
						if = {
							limit = { has_global_flag = tpt_cw_elites }
							start_civil_war = {
								ruling_party = people
								ideology = elites
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_intellectuals }
							start_civil_war = {
								ruling_party = people
								ideology = intellectuals
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_ruler }
							start_civil_war = {
								ruling_party = people
								ideology = ruler
								size = 0.5
							}
						}
					}
					if = {
						limit = { has_government = elites }
						if = {
							limit = { has_global_flag = tpt_cw_people }
							start_civil_war = {
								ruling_party = elites
								ideology = people
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_intellectuals }
							start_civil_war = {
								ruling_party = elites
								ideology = intellectuals
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_ruler }
							start_civil_war = {
								ruling_party = elites
								ideology = ruler
								size = 0.5
							}
						}
					}
					if = {
						limit = { has_government = intellectuals }
						if = {
							limit = { has_global_flag = tpt_cw_elites }
							start_civil_war = {
								ruling_party = intellectuals
								ideology = elites
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_people }
							start_civil_war = {
								ruling_party = intellectuals
								ideology = people
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_ruler }
							start_civil_war = {
								ruling_party = intellectuals
								ideology = ruler
								size = 0.5
							}
						}
					}
					if = {
						limit = { has_government = ruler }
						if = {
							limit = { has_global_flag = tpt_cw_elites }
							start_civil_war = {
								ruling_party = ruler
								ideology = elites
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_intellectuals }
							start_civil_war = {
								ruling_party = ruler
								ideology = intellectuals
								size = 0.5
							}
						}
						if = {
							limit = { has_global_flag = tpt_cw_people }
							start_civil_war = {
								ruling_party = ruler
								ideology = people
								size = 0.5
							}
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }

						if = {
							limit = { has_government = people }
							if = {
								limit = { has_global_flag = tpt_cw_elites }
								start_civil_war = {
									ruling_party = people
									ideology = elites
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_intellectuals }
								start_civil_war = {
									ruling_party = people
									ideology = intellectuals
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_ruler }
								start_civil_war = {
									ruling_party = people
									ideology = ruler
									size = 0.5
								}
							}
						}
						if = {
							limit = { has_government = elites }
							if = {
								limit = { has_global_flag = tpt_cw_people }
								start_civil_war = {
									ruling_party = elites
									ideology = people
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_intellectuals }
								start_civil_war = {
									ruling_party = elites
									ideology = intellectuals
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_ruler }
								start_civil_war = {
									ruling_party = elites
									ideology = ruler
									size = 0.5
								}
							}
						}
						if = {
							limit = { has_government = intellectuals }
							if = {
								limit = { has_global_flag = tpt_cw_elites }
								start_civil_war = {
									ruling_party = intellectuals
									ideology = elites
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_people }
								start_civil_war = {
									ruling_party = intellectuals
									ideology = people
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_ruler }
								start_civil_war = {
									ruling_party = intellectuals
									ideology = ruler
									size = 0.5
								}
							}
						}
						if = {
							limit = { has_government = ruler }
							if = {
								limit = { has_global_flag = tpt_cw_elites }
								start_civil_war = {
									ruling_party = ruler
									ideology = elites
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_intellectuals }
								start_civil_war = {
									ruling_party = ruler
									ideology = intellectuals
									size = 0.5
								}
							}
							if = {
								limit = { has_global_flag = tpt_cw_people }
								start_civil_war = {
									ruling_party = ruler
									ideology = people
									size = 0.5
								}
							}
						}
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_threat_1_click = {
				add_named_threat = {
					threat = 1
					name = Toolpack
				}
			}
			tpt_add_threat_5_click = {
				add_named_threat = {
					threat = 5
					name = Toolpack
				}
			}
			tpt_add_threat_20_click = {
				add_named_threat = {
					threat = 20
					name = Toolpack
				}
			}
			tpt_sub_threat_1_click = {
				add_named_threat = {
					threat = -1
					name = Toolpack
				}
			}
			tpt_sub_threat_5_click = {
				add_named_threat = {
					threat = -5
					name = Toolpack
				}
			}
			tpt_sub_threat_20_click = {
				add_named_threat = {
					threat = -20
					name = Toolpack
				}
			}
### COUNTRY ###
			tpt_add_stability_1_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_stability = 0.01
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_stability = 0.01
					}
				}
			}
			tpt_add_stability_5_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_stability = 0.05
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_stability = 0.05
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_stability_20_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_stability = 0.20
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_stability = 0.20
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_sub_stability_1_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_stability = -0.01
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_stability = -0.01
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_sub_stability_5_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_stability = -0.05
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_stability = -0.05
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_sub_stability_20_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_stability = -0.20
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_stability = -0.20
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_war_support_1_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_war_support = 0.01
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_war_support = 0.01
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_war_support_5_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_war_support = 0.05
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_war_support = 0.05
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_add_war_support_20_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_war_support = 0.20
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_war_support = 0.20
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_sub_war_support_1_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_war_support = -0.01
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_war_support = -0.01
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_sub_war_support_5_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_war_support = -0.05
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_war_support = -0.05
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_sub_war_support_20_click = {
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					add_war_support = -0.20
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						add_war_support = -0.20
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_create_faction_click = {
				custom_effect_tooltip = TPT_CREATE_FACTION
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_treaty_geneva }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 3
								tag = SWI
								AND = {
									NOT = { country_exists = SWI }
									all_state = {
										if = {
											limit = { is_core_of = SWI }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of Geneva"
						set_global_flag = tpt_taken_treaty_geneva
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_nato }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 16
								tag = FRA
								AND = {
									NOT = { country_exists = FRA }
									all_state = {
										if = {
											limit = { is_core_of = FRA }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of Paris"
						set_global_flag = tpt_taken_treaty_paris
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_treaty_london }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 126
								tag = ENG
								AND = {
									NOT = { country_exists = ENG }
									all_state = {
										if = {
											limit = { is_core_of = ENG }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of London"
						set_global_flag = tpt_taken_treaty_london
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_treaty_berlin }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 64
								tag = GER
								AND = {
									NOT = { country_exists = GER }
									all_state = {
										if = {
											limit = { is_core_of = GER }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of Berlin"
						set_global_flag = tpt_taken_treaty_berlin
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_treaty_rome }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 2
								tag = ITA
								AND = {
									NOT = { country_exists = ITA }
									all_state = {
										if = {
											limit = { is_core_of = ITA }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of Rome"
						set_global_flag = tpt_taken_treaty_rome
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_treaty_moscow }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 219
								tag = SOV
								AND = {
									NOT = { country_exists = SOV }
									all_state = {
										if = {
											limit = { is_core_of = SOV }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of Moscow"
						set_global_flag = tpt_taken_treaty_moscow
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_treaty_vienna }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 4
								tag = AUS
								AND = {
									NOT = { country_exists = AUS }
									all_state = {
										if = {
											limit = { is_core_of = AUS }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of Vienna"
						set_global_flag = tpt_taken_treaty_vienna
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_treaty_warsaw }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								owns_state = 10
								tag = POL
								AND = {
									NOT = { country_exists = POL }
									all_state = {
										if = {
											limit = { is_core_of = POL }
											is_owned_by = FROM
										}
									}
								}
							}
						}
						create_faction = "Treaty of Warsaw"
						set_global_flag = tpt_taken_treaty_warsaw
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_nato }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = people
							tag = USA
						}
						create_faction = "NATO"
						set_global_flag = tpt_taken_nato
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_lebensraum }
							NOT = { has_global_flag = tpt_stop_faction_names }
							OR = {
								tag = POL
								tag = SOV
							}
						}
						create_faction = "Lebensraum"
						set_global_flag = tpt_taken_lebensraum
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_fifth_international }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = intellectuals
							NOT = { tag = SOV }
							NOT = {
								has_country_leader = {
									name = "Leon Trotsky"
									ruling_only = yes
								}
							}
						}
						create_faction = "Fifth International"
						set_global_flag = tpt_taken_fifth_international
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_532_international }
							has_global_flag = tpt_taken_fifth_international
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = intellectuals
							NOT = { tag = SOV }
							NOT = {
								has_country_leader = {
									name = "Leon Trotsky"
									ruling_only = yes
								}
							}
						}
						create_faction = "Five Hundred Thirty-Second International"
						set_global_flag = tpt_taken_532_international
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_intellectuals_vanguard }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = intellectuals
						}
						create_faction = "intellectuals Vanguard"
						set_global_flag = tpt_taken_intellectuals_vanguard
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_brownshirts }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = elites
						}
						create_faction = "Brownshirts"
						set_global_flag = tpt_taken_brownshirts
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_blackshirts }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = elites
						}
						create_faction = "Blackshirts"
						set_global_flag = tpt_taken_blackshirts
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_red_front }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = intellectuals
						}
						create_faction = "Red Front"
						set_global_flag = tpt_taken_red_front
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_liberation_pact }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = people
						}
						create_faction = "Liberation Pact"
						set_global_flag = tpt_taken_liberation_pact
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_home_of_the_free }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = people
						}
						create_faction = "Home of the Free"
						set_global_flag = tpt_taken_home_of_the_free
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_vertical_axis }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = elites
						}
						create_faction = "Vertical Axis"
						set_global_flag = tpt_taken_vertical_axis
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_peoples_united_republics }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = intellectuals
						}
						create_faction = "People's United Republics"
						set_global_flag = tpt_taken_peoples_united_republics
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_peacekeepers }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = people
						}
						create_faction = "Peacekeepers"
						set_global_flag = tpt_taken_peacekeepers
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_global_defensive_alliance }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = people
						}
						create_faction = "Global Defensive Alliance"
						set_global_flag = tpt_taken_global_defensive_alliance
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_central_states }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = ruler
						}
						create_faction = "Central States"
						set_global_flag = tpt_taken_central_states
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_iron_guard }
							NOT = { has_global_flag = tpt_stop_faction_names }
							has_government = ruler
						}
						create_faction = "Iron Guard"
						set_global_flag = tpt_taken_iron_guard
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_entente_cordiale }
							NOT = { has_global_flag = tpt_stop_faction_names }
						}
						create_faction = "Entente Cordiale"
						set_global_flag = tpt_taken_entente_cordiale
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_central_powers }
							NOT = { has_global_flag = tpt_stop_faction_names }
						}
						create_faction = "Central Powers"
						set_global_flag = tpt_taken_central_powers
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_iron_front }
							NOT = { has_global_flag = tpt_stop_faction_names }
						}
						create_faction = "Iron Front"
						set_global_flag = tpt_taken_iron_front
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_entente }
							NOT = { has_global_flag = tpt_stop_faction_names }
						}
						create_faction = "Entente"
						set_global_flag = tpt_taken_entente
						set_global_flag = tpt_stop_faction_names
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_taken_new_world_order }
							NOT = { has_global_flag = tpt_stop_faction_names }
						}
						create_faction = "New World Order"
						set_global_flag = tpt_taken_new_world_order
						set_global_flag = tpt_stop_faction_names
					}
					clr_global_flag = tpt_stop_faction_names
					if = {
						limit = {
							has_global_flag = tpt_taken_intellectuals_vanguard
							has_global_flag = tpt_taken_brownshirts
							has_global_flag = tpt_taken_blackshirts
							has_global_flag = tpt_taken_red_front
							has_global_flag = tpt_taken_liberation_pact
							has_global_flag = tpt_taken_home_of_the_free
							has_global_flag = tpt_taken_peoples_united_republics
							has_global_flag = tpt_taken_peacekeepers
							has_global_flag = tpt_taken_global_defensive_alliance
							has_global_flag = tpt_taken_central_states
							has_global_flag = tpt_taken_iron_guard
							has_global_flag = tpt_taken_entente_cordiale
							has_global_flag = tpt_taken_central_powers
							has_global_flag = tpt_taken_iron_front
							has_global_flag = tpt_taken_entente
							has_global_flag = tpt_taken_new_world_order
						}
						clr_global_flag = tpt_taken_intellectuals_vanguard
						clr_global_flag = tpt_taken_brownshirts
						clr_global_flag = tpt_taken_blackshirts
						clr_global_flag = tpt_taken_red_front
						clr_global_flag = tpt_taken_liberation_pact
						clr_global_flag = tpt_taken_home_of_the_free
						clr_global_flag = tpt_taken_peoples_united_republics
						clr_global_flag = tpt_taken_peacekeepers
						clr_global_flag = tpt_taken_global_defensive_alliance
						clr_global_flag = tpt_taken_central_states
						clr_global_flag = tpt_taken_iron_guard
						clr_global_flag = tpt_taken_entente_cordiale
						clr_global_flag = tpt_taken_central_powers
						clr_global_flag = tpt_taken_iron_front
						clr_global_flag = tpt_taken_entente
						clr_global_flag = tpt_taken_new_world_order
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						create_faction = "Toolpack"
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_dismantle_faction_click = {
				custom_effect_tooltip = TPT_DISMANTLE_FACTION
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					dismantle_faction = yes
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						dismantle_faction = yes
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_dismantle_all_factions_click = {
				tcw_clear_all_global_confirms = yes
				set_global_flag = tp_open_confirmation_window
				set_global_flag = tpt_confirm_faction_dismantling
				custom_effect_tooltip = TPT_DISMANTLE_ALL_FACTIONS
				effect_tooltip = {
					every_country = {
						dismantle_faction = yes
					}
				}
			}
			tpt_add_to_faction_click = {
				custom_effect_tooltip = TPT_ADD_TO_FACTION
				every_country = {
					limit = { has_country_flag = tpt_actor }
					FROM = {
						add_to_faction = PREV
					}
					clr_country_flag = tpt_actor
				}
			}
			tpt_leave_faction_click = {
				custom_effect_tooltip = TPT_LEAVE_FACTION
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					leave_faction = yes
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = tpt_actor
						}
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						leave_faction = yes
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_make_faction_leader_click = {
				set_faction_leader = yes
			}
			tpt_set_major_button_click = {
				custom_effect_tooltip = TPT_SET_MAJOR
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					set_major = yes
					set_country_flag = tpt_major
					clr_country_flag = tpt_not_major
					clr_country_flag = tpt_actor
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						set_major = yes
						set_country_flag = tpt_major
						clr_country_flag = tpt_not_major
						clr_country_flag = tpt_actor
					}
				}
			}
			tpt_unmajor_button_click = {
				custom_effect_tooltip = TPT_SET_UNMAJOR
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					set_major = no
					set_country_flag = tpt_not_major
					clr_country_flag = tpt_major
					clr_country_flag = tpt_actor
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						set_major = no
						set_country_flag = tpt_not_major
						clr_country_flag = tpt_major
						clr_country_flag = tpt_actor
					}
				}
			}
		}
		triggers = {

			tpt_tab_button_frame_1a_visible = {
				NOT = { has_global_flag = tpt_window_a }
			}
			tpt_tab_button_frame_2a_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_tab_button_frame_1b_visible = {
				NOT = { has_global_flag = tpt_window_b }
			}
			tpt_tab_button_frame_2b_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_tab_button_frame_1c_visible = {
				NOT = { has_global_flag = tpt_window_c }
			}
			tpt_tab_button_frame_2c_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_tab_button_frame_1d_visible = {
				NOT = { has_global_flag = tpt_window_d }
			}
			tpt_tab_button_frame_2d_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_tab_button_frame_1e_visible = {
				NOT = { has_global_flag = tpt_window_e }
			}
			tpt_tab_button_frame_2e_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_marker_visible = {
				NOT = {
					has_country_flag = tpt_actor
				}
			}
			tpt_marker_enabled = {
				NOT = {
					has_country_flag = tpt_actor
				}
			}
			tpt_unmarker_visible = {
				has_country_flag = tpt_actor
			}
			tpt_unmarker_click_enabled = {
				has_country_flag = tpt_actor
			}
			tpt_unmark_all_visible = {
			}
			tpt_unmark_all_click_enabled = {
				any_country = {
					has_country_flag = tpt_actor
				}
			}
### RESEARCH ###
			tpt_remove_rs_slot_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_remove_rs_slot_click_enabled = {
				OR = {
					AND = {
						any_country = {
							has_country_flag = tpt_actor
							NOT = {
								check_variable = { THIS.amount_research_slots = 0 }
							}
						}
					}
					AND = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						NOT = {
							check_variable = { THIS.amount_research_slots = 0 }
						}
					}
				}
			}
			tpt_add_rs_slot_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_rs_slot_value_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_rs_slot_text_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_set_0_rs_slots_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_set_0_rs_slots_click_enabled = {
				OR = {
					AND = {
						any_country = {
							has_country_flag = tpt_actor
							NOT = {
								check_variable = { THIS.amount_research_slots = 0 }
							}
						}
					}
					AND = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						NOT = {
							check_variable = { THIS.amount_research_slots = 0 }
						}
					}
				}
			}
			tpt_set_100_rs_slots_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_set_100_rs_slots_click_enabled = {
				OR = {
					AND = {
						any_country = {
							has_country_flag = tpt_actor
							NOT = {
								check_variable = { THIS.amount_research_slots = 100 }
							}
						}
					}
					AND = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						NOT = {
							check_variable = { THIS.amount_research_slots = 100 }
						}
					}
				}
			}
			tpt_reset_rs_slots_visible = {
				has_global_flag = tpt_window_e
			}
			tpt_reset_rs_slots_click_enabled = {
				OR = {
					AND = {
						any_country = {
							has_country_flag = tpt_actor
							has_country_flag = original_amount_rs_slots
						}
					}
					AND = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						has_country_flag = original_amount_rs_slots
					}
				}
			}
### IDEOLOGY ###
			tpt_add_elites_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_ban_elites_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_add_intellectuals_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_ban_intellectuals_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_add_people_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_ban_people_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_add_ruler_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_ban_ruler_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_elites_on_visible = {
				has_global_flag = tpt_window_a
				NOT = { has_global_flag = tpt_elites }
			}
			tpt_elites_off_visible = {
				has_global_flag = tpt_window_a
				has_global_flag = tpt_elites
			}
			tpt_intellectuals_on_visible = {
				has_global_flag = tpt_window_a
				NOT = { has_global_flag = tpt_intellectuals }
			}
			tpt_intellectuals_off_visible = {
				has_global_flag = tpt_window_a
				has_global_flag = tpt_intellectuals
			}
			tpt_people_on_visible = {
				has_global_flag = tpt_window_a
				NOT = { has_global_flag = tpt_people }
			}
			tpt_people_off_visible = {
				has_global_flag = tpt_window_a
				has_global_flag = tpt_people
			}
			tpt_ruler_on_visible = {
				has_global_flag = tpt_window_a
				NOT = { has_global_flag = tpt_ruler }
			}
			tpt_ruler_off_visible = {
				has_global_flag = tpt_window_a
				has_global_flag = tpt_ruler
			}
			tpt_add_5_click_enabled = {
				OR = {
					has_global_flag = tpt_elites
					has_global_flag = tpt_intellectuals
					has_global_flag = tpt_people
					has_global_flag = tpt_ruler
				}
			}
			tpt_add_5_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_subtract_5_click_enabled = {
				OR = {
					has_global_flag = tpt_elites
					has_global_flag = tpt_intellectuals
					has_global_flag = tpt_people
					has_global_flag = tpt_ruler
				}
			}
			tpt_subtract_5_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_add_10_click_enabled = {
				OR = {
					has_global_flag = tpt_elites
					has_global_flag = tpt_intellectuals
					has_global_flag = tpt_people
					has_global_flag = tpt_ruler
				}
			}
			tpt_add_10_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_subtract_10_click_enabled = {
				OR = {
					has_global_flag = tpt_elites
					has_global_flag = tpt_intellectuals
					has_global_flag = tpt_people
					has_global_flag = tpt_ruler
				}
			}
			tpt_subtract_10_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_add_50_click_enabled = {
				OR = {
					has_global_flag = tpt_elites
					has_global_flag = tpt_intellectuals
					has_global_flag = tpt_people
					has_global_flag = tpt_ruler
				}
			}
			tpt_add_50_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_subtract_50_click_enabled = {
				OR = {
					has_global_flag = tpt_elites
					has_global_flag = tpt_intellectuals
					has_global_flag = tpt_people
					has_global_flag = tpt_ruler
				}
			}
			tpt_subtract_50_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_change_click_enabled = {
				OR = {
					AND = {
						has_global_flag = tpt_elites
						NOT = { has_global_flag = tpt_intellectuals }
						NOT = { has_global_flag = tpt_people }
						NOT = { has_global_flag = tpt_ruler }
					}
					AND = {
						has_global_flag = tpt_intellectuals
						NOT = { has_global_flag = tpt_elites }
						NOT = { has_global_flag = tpt_people }
						NOT = { has_global_flag = tpt_ruler }
					}
					AND = {
						has_global_flag = tpt_people
						NOT = { has_global_flag = tpt_elites }
						NOT = { has_global_flag = tpt_intellectuals }
						NOT = { has_global_flag = tpt_ruler }
					}
					AND = {
						has_global_flag = tpt_ruler
						NOT = { has_global_flag = tpt_elites }
						NOT = { has_global_flag = tpt_intellectuals }
						NOT = { has_global_flag = tpt_people }
					}
				}
			}
			tpt_elites_text_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_elites_number_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_intellectuals_text_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_intellectuals_number_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_people_text_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_people_number_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_ruler_text_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_ruler_number_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_change_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_enable_elections_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_enable_elections_click_enabled = {
				OR = {
					AND = {
						any_country = {
							has_country_flag = tpt_actor
							NOT = { has_elections = yes }
						}
					}
					AND = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						NOT = { has_elections = yes }
					}
				}
			}
			tpt_disable_elections_visible = {
				has_global_flag = tpt_window_a
			}
			tpt_disable_elections_click_enabled = {
				OR = {
					AND = {
						any_country = {
							has_country_flag = tpt_actor
							has_elections = yes
						}
					}
					AND = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						has_elections = yes
					}
				}
			}
### DIPLMOACY ###
			tpt_guarantee_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_guarantee_click_enabled = {
				any_other_country = {
					has_country_flag = tpt_actor
					NOT = { has_guaranteed = FROM }
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_no_guarantee_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_no_guarantee_click_enabled = {
				any_other_country = {
					has_country_flag = tpt_actor
					has_guaranteed = FROM
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_remove_all_guarantees_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_remove_all_guarantees_click_enabled = {
				OR = {
					AND = {
						all_other_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						any_other_country = {
							has_guaranteed = FROM
						}
					}
					any_other_country = {
						has_country_flag = tpt_actor
						has_guaranteed = FROM
					}
				}
			}
			tpt_access_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_access_click_enabled = {
				any_other_country = {
					has_country_flag = tpt_actor
					NOT = { gives_military_access_to = FROM }
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_no_access_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_no_access_click_enabled = {
				any_other_country = {
					has_country_flag = tpt_actor
					gives_military_access_to = FROM
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_remove_all_access_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_remove_all_access_click_enabled = {
				any_country = {
					has_military_access_to = FROM
				}
			}
			tpt_nap_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_nap_click_enabled = {
				any_other_country = {
					has_country_flag = tpt_actor
					NOT = { has_non_aggression_pact_with = FROM }
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_no_nap_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_no_nap_click_enabled = {
				any_other_country = {
					has_country_flag = tpt_actor
					has_non_aggression_pact_with = FROM
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_remove_all_naps_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_remove_all_naps_click_enabled = {
				any_country = {
					has_non_aggression_pact_with = FROM
				}
			}
			tpt_decrease_opinion_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_decrease_opinion_click_enabled = {
				check_variable = { global.tpt_op_value > -100 }
			}
			tpt_increase_opinion_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_increase_opinion_click_enabled = {
				check_variable = { global.tpt_op_value < 100 }
			}
			tpt_opinion_value_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_decrease_trade_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_decrease_trade_click_enabled = {
				check_variable = { global.tpt_trade_value > -100 }
			}
			tpt_increase_trade_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_increase_trade_click_enabled = {
				check_variable = { global.tpt_trade_value < 100 }
			}
			tpt_trade_value_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_opinion_text_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_op_on_visible = {
				has_global_flag = tpt_window_b
				has_global_flag = tpt_op_turned_off
			}
			tpt_op_off_visible = {
				has_global_flag = tpt_window_b
				NOT = { has_global_flag = tpt_op_turned_off }
			}
			tpt_trade_text_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_trade_on_visible = {
				has_global_flag = tpt_window_b
				has_global_flag = tpt_trade_turned_off
			}
			tpt_trade_off_visible = {
				has_global_flag = tpt_window_b
				NOT = { has_global_flag = tpt_trade_turned_off }
			}
			tpt_add_opinion_button_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_add_opinion_button_click_enabled = {
				NOT = { has_country_flag = tpt_actor }
				any_other_country = {
					has_country_flag = tpt_actor
					OR = {
						NOT = { has_opinion_modifier = TPT_neg_100_tno }
						NOT = { has_opinion_modifier = TPT_neg_90_tno }
						NOT = { has_opinion_modifier = TPT_neg_80_tno }
						NOT = { has_opinion_modifier = TPT_neg_70_tno }
						NOT = { has_opinion_modifier = TPT_neg_60_tno }
						NOT = { has_opinion_modifier = TPT_neg_50_tno }
						NOT = { has_opinion_modifier = TPT_neg_40_tno }
						NOT = { has_opinion_modifier = TPT_neg_30_tno }
						NOT = { has_opinion_modifier = TPT_neg_20_tno }
						NOT = { has_opinion_modifier = TPT_neg_10_tno }
						NOT = { has_opinion_modifier = TPT_pos_100_tno }
						NOT = { has_opinion_modifier = TPT_pos_90_tno }
						NOT = { has_opinion_modifier = TPT_pos_80_tno }
						NOT = { has_opinion_modifier = TPT_pos_70_tno }
						NOT = { has_opinion_modifier = TPT_pos_60_tno }
						NOT = { has_opinion_modifier = TPT_pos_50_tno }
						NOT = { has_opinion_modifier = TPT_pos_40_tno }
						NOT = { has_opinion_modifier = TPT_pos_30_tno }
						NOT = { has_opinion_modifier = TPT_pos_20_tno }
						NOT = { has_opinion_modifier = TPT_pos_10_tno }
						NOT = { has_opinion_modifier = TPT_neg_100_tyes }
						NOT = { has_opinion_modifier = TPT_neg_90_tyes }
						NOT = { has_opinion_modifier = TPT_neg_80_tyes }
						NOT = { has_opinion_modifier = TPT_neg_70_tyes }
						NOT = { has_opinion_modifier = TPT_neg_60_tyes }
						NOT = { has_opinion_modifier = TPT_neg_50_tyes }
						NOT = { has_opinion_modifier = TPT_neg_40_tyes }
						NOT = { has_opinion_modifier = TPT_neg_30_tyes }
						NOT = { has_opinion_modifier = TPT_neg_20_tyes }
						NOT = { has_opinion_modifier = TPT_neg_10_tyes }
						NOT = { has_opinion_modifier = TPT_pos_100_tyes }
						NOT = { has_opinion_modifier = TPT_pos_90_tyes }
						NOT = { has_opinion_modifier = TPT_pos_80_tyes }
						NOT = { has_opinion_modifier = TPT_pos_70_tyes }
						NOT = { has_opinion_modifier = TPT_pos_60_tyes }
						NOT = { has_opinion_modifier = TPT_pos_50_tyes }
						NOT = { has_opinion_modifier = TPT_pos_40_tyes }
						NOT = { has_opinion_modifier = TPT_pos_30_tyes }
						NOT = { has_opinion_modifier = TPT_pos_20_tyes }
						NOT = { has_opinion_modifier = TPT_pos_10_tyes }
					}
				}
			}
			tpt_remove_opinion_button_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_remove_opinion_button_click_enabled = {
				NOT = { has_country_flag = tpt_actor }
				any_other_country = {
					has_country_flag = tpt_actor
					OR = {
						has_opinion_modifier = TPT_neg_100_tno
						has_opinion_modifier = TPT_neg_90_tno
						has_opinion_modifier = TPT_neg_80_tno
						has_opinion_modifier = TPT_neg_70_tno
						has_opinion_modifier = TPT_neg_60_tno
						has_opinion_modifier = TPT_neg_50_tno
						has_opinion_modifier = TPT_neg_40_tno
						has_opinion_modifier = TPT_neg_30_tno
						has_opinion_modifier = TPT_neg_20_tno
						has_opinion_modifier = TPT_neg_10_tno
						has_opinion_modifier = TPT_pos_100_tno
						has_opinion_modifier = TPT_pos_90_tno
						has_opinion_modifier = TPT_pos_80_tno
						has_opinion_modifier = TPT_pos_70_tno
						has_opinion_modifier = TPT_pos_60_tno
						has_opinion_modifier = TPT_pos_50_tno
						has_opinion_modifier = TPT_pos_40_tno
						has_opinion_modifier = TPT_pos_30_tno
						has_opinion_modifier = TPT_pos_20_tno
						has_opinion_modifier = TPT_pos_10_tno
						has_opinion_modifier = TPT_neg_100_tyes
						has_opinion_modifier = TPT_neg_90_tyes
						has_opinion_modifier = TPT_neg_80_tyes
						has_opinion_modifier = TPT_neg_70_tyes
						has_opinion_modifier = TPT_neg_60_tyes
						has_opinion_modifier = TPT_neg_50_tyes
						has_opinion_modifier = TPT_neg_40_tyes
						has_opinion_modifier = TPT_neg_30_tyes
						has_opinion_modifier = TPT_neg_20_tyes
						has_opinion_modifier = TPT_neg_10_tyes
						has_opinion_modifier = TPT_pos_100_tyes
						has_opinion_modifier = TPT_pos_90_tyes
						has_opinion_modifier = TPT_pos_80_tyes
						has_opinion_modifier = TPT_pos_70_tyes
						has_opinion_modifier = TPT_pos_60_tyes
						has_opinion_modifier = TPT_pos_50_tyes
						has_opinion_modifier = TPT_pos_40_tyes
						has_opinion_modifier = TPT_pos_30_tyes
						has_opinion_modifier = TPT_pos_20_tyes
						has_opinion_modifier = TPT_pos_10_tyes
					}
				}
			}
			tpt_remove_all_opinions_button_visible = {
				has_global_flag = tpt_window_b
			}
			tpt_remove_all_opinions_button_click_enabled = {
				OR = {
					has_opinion_modifier = TPT_neg_100_tno
					has_opinion_modifier = TPT_neg_90_tno
					has_opinion_modifier = TPT_neg_80_tno
					has_opinion_modifier = TPT_neg_70_tno
					has_opinion_modifier = TPT_neg_60_tno
					has_opinion_modifier = TPT_neg_50_tno
					has_opinion_modifier = TPT_neg_40_tno
					has_opinion_modifier = TPT_neg_30_tno
					has_opinion_modifier = TPT_neg_20_tno
					has_opinion_modifier = TPT_neg_10_tno
					has_opinion_modifier = TPT_pos_100_tno
					has_opinion_modifier = TPT_pos_90_tno
					has_opinion_modifier = TPT_pos_80_tno
					has_opinion_modifier = TPT_pos_70_tno
					has_opinion_modifier = TPT_pos_60_tno
					has_opinion_modifier = TPT_pos_50_tno
					has_opinion_modifier = TPT_pos_40_tno
					has_opinion_modifier = TPT_pos_30_tno
					has_opinion_modifier = TPT_pos_20_tno
					has_opinion_modifier = TPT_pos_10_tno
					has_opinion_modifier = TPT_neg_100_tyes
					has_opinion_modifier = TPT_neg_90_tyes
					has_opinion_modifier = TPT_neg_80_tyes
					has_opinion_modifier = TPT_neg_70_tyes
					has_opinion_modifier = TPT_neg_60_tyes
					has_opinion_modifier = TPT_neg_50_tyes
					has_opinion_modifier = TPT_neg_40_tyes
					has_opinion_modifier = TPT_neg_30_tyes
					has_opinion_modifier = TPT_neg_20_tyes
					has_opinion_modifier = TPT_neg_10_tyes
					has_opinion_modifier = TPT_pos_100_tyes
					has_opinion_modifier = TPT_pos_90_tyes
					has_opinion_modifier = TPT_pos_80_tyes
					has_opinion_modifier = TPT_pos_70_tyes
					has_opinion_modifier = TPT_pos_60_tyes
					has_opinion_modifier = TPT_pos_50_tyes
					has_opinion_modifier = TPT_pos_40_tyes
					has_opinion_modifier = TPT_pos_30_tyes
					has_opinion_modifier = TPT_pos_20_tyes
					has_opinion_modifier = TPT_pos_10_tyes
				}
			}
### STANCE ###
			tpt_war_button_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_war_button_click_enabled = {
				any_other_country = {
					NOT = { has_war_with = FROM }
					has_country_flag = tpt_actor
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_peace_button_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_peace_button_click_enabled = {
				any_other_country = {
					has_country_flag = tpt_actor
					has_war_with = FROM
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_truce_button_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_truce_button_click_enabled = {
				any_other_country = {
					NOT = { has_war_with = FROM }
					has_country_flag = tpt_actor
				}
				NOT = { has_country_flag = tpt_actor }
			}
			tpt_cw_button_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_cw_button_click_enabled = {
				OR = {
					AND = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
						NOT = { has_civil_war = yes }
						num_of_controlled_states > 1
					}
					AND = {
						any_country = {
							has_country_flag = tpt_actor
						}
						all_country = {
							if = {
								limit = { has_country_flag = tpt_actor }
								has_civil_war = no
								num_of_controlled_states > 1
							}
						}
					}
				}
			}
			tpt_add_threat_1_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_add_threat_5_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_add_threat_20_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_sub_threat_1_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_sub_threat_5_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_sub_threat_20_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_threat_text_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_create_faction_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_dismantle_faction_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_dismantle_faction_click_enabled = {
				OR = {
					AND = {
						is_faction_leader = yes
						all_other_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					any_country = {
						is_faction_leader = yes
						has_country_flag = tpt_actor
					}
				}
			}
			tpt_add_to_faction_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_add_to_faction_click_enabled = {
				NOT = { has_country_flag = tpt_actor }
				is_faction_leader = yes
				any_other_country = {
					has_country_flag = tpt_actor
					NOT = { is_in_faction_with = FROM }
				}
			}
			tpt_leave_faction_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_leave_faction_click_enabled = {
				OR = {
					AND = {
						is_in_faction = yes
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					any_country = {
						has_country_flag = tpt_actor
						is_in_faction = yes
					}
				}
			}
			tpt_dismantle_all_factions_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_dismantle_all_factions_click_enabled = {
				any_country = { is_in_faction = yes }
			}
			tpt_make_faction_leader_visible = {
				has_global_flag = tpt_window_c
			}
			tpt_make_faction_leader_click_enabled = {
				NOT = { is_faction_leader = yes }
				is_in_faction = yes
			}
### COUNTRY ###
			tpt_set_major_button_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_set_major_button_click_enabled = {
				is_major = no
				NOT = { has_country_flag = tpt_major }
			}
			tpt_unmajor_button_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_unmajor_button_click_enabled = {
				has_country_flag = tpt_major
				NOT = { has_country_flag = tpt_not_major }
			}
			tpt_major_text_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_stability_text_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_add_stability_1_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_add_stability_5_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_add_stability_20_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_sub_stability_1_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_sub_stability_5_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_sub_stability_20_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_war_support_text_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_add_war_support_1_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_add_war_support_5_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_add_war_support_20_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_sub_war_support_1_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_sub_war_support_5_visible = {
				has_global_flag = tpt_window_d
			}
			tpt_sub_war_support_20_visible = {
				has_global_flag = tpt_window_d
			}
		}
		effects = {

			tpt_add_opinion_button_click = {
				custom_effect_tooltip = TPT_ADD_OPINIONS
				if = {
					limit = {
						any_other_country = { has_country_flag = tpt_actor }
						NOT = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tno
							}
						}
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_trade_turned_off }
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tyes
							}
						}
					}
				}
				if = {
					limit = {
						has_country_flag = tpt_actor
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								NOT = { has_global_flag = tpt_op_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tno
								}
							}
						}
						if = {
							limit = {
								NOT = { has_global_flag = tpt_trade_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tyes
								}
							}
						}
					}
				}
			}
			tpt_remove_opinion_button_click = {
				custom_effect_tooltip = TPT_REMOVE_OPINIONS
				if = {
					limit = {
						any_other_country = { has_country_flag = tpt_actor }
						NOT = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tno
							}
						}
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_trade_turned_off }
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tyes
							}
						}
					}
				}
				if = {
					limit = {
						has_country_flag = tpt_actor
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								NOT = { has_global_flag = tpt_op_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tno
								}
							}
						}
						if = {
							limit = {
								NOT = { has_global_flag = tpt_trade_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tyes
								}
							}
						}
					}
				}
			}
			tpt_remove_all_opinions_button_click = {
				every_other_country = {
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_100_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_90_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_80_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_70_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_60_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_50_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_40_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_30_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_20_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_10_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_10_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_20_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_30_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_40_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_50_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_60_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_70_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_80_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_90_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_100_tno
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_100_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_90_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_80_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_70_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_60_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_50_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_40_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_30_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_20_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_neg_10_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_10_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_20_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_30_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_40_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_50_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_60_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_70_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_80_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_90_tyes
					}
					remove_opinion_modifier = {
						target = FROM
						modifier = TPT_pos_100_tyes
					}
					FROM = {
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_100_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_90_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_80_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_70_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_60_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_50_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_40_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_30_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_20_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_10_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_10_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_20_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_30_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_40_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_50_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_60_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_70_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_80_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_90_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_100_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_100_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_90_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_80_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_70_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_60_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_50_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_40_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_30_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_20_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_10_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_10_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_20_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_30_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_40_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_50_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_60_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_70_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_80_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_90_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_100_tyes
						}
					}
				}
			}
			### OPINION ###

			tpt_add_opinion_button_click = {
				if = {
					limit = {
						any_other_country = { has_country_flag = tpt_actor }
						NOT = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tno
							}
						}
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_trade_turned_off }
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 10 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 20 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 30 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 40 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 50 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 60 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 70 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 80 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 90 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 100 }
							}
							add_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tyes
							}
						}
					}
				}
				if = {
					limit = {
						has_country_flag = tpt_actor
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								NOT = { has_global_flag = tpt_op_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tno
								}
							}
						}
						if = {
							limit = {
								NOT = { has_global_flag = tpt_trade_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 10 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 20 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 30 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 40 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 50 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 60 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 70 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 80 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 90 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 100 }
								}
								add_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tyes
								}
							}
						}
					}
				}
			}
			tpt_remove_opinion_button_click = {
				if = {
					limit = {
						any_other_country = { has_country_flag = tpt_actor }
						NOT = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = -10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tno
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_op_value = 100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tno
							}
						}
					}
					if = {
						limit = {
							NOT = { has_global_flag = tpt_trade_turned_off }
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_100_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = -10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_neg_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 10 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_10_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 20 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_20_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 30 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_30_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 40 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_40_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 50 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_50_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 60 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_60_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 70 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_70_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 80 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_80_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 90 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_90_tyes
							}
						}
						if = {
							limit = {
								check_variable = { global.tpt_trade_value = 100 }
							}
							remove_opinion_modifier = {
								target = FROM
								modifier = TPT_pos_100_tyes
							}
						}
					}
				}
				if = {
					limit = {
						has_country_flag = tpt_actor
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
						if = {
							limit = {
								NOT = { has_global_flag = tpt_op_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = -10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tno
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_op_value = 100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tno
								}
							}
						}
						if = {
							limit = {
								NOT = { has_global_flag = tpt_trade_turned_off }
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_100_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = -10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_neg_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 10 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_10_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 20 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_20_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 30 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_30_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 40 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_40_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 50 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_50_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 60 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_60_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 70 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_70_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 80 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_80_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 90 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_90_tyes
								}
							}
							if = {
								limit = {
									check_variable = { global.tpt_trade_value = 100 }
								}
								remove_opinion_modifier = {
									target = FROM
									modifier = TPT_pos_100_tyes
								}
							}
						}
					}
				}
			}
			tpt_remove_all_opinions_button_click = {
				custom_effect_tooltip = TPT_REMOVE_ALL_OPINIONS
				if = {
					limit = {
						all_country = {
							NOT = { has_country_flag = tpt_actor }
						}
					}
					every_other_country = {
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_100_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_90_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_80_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_70_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_60_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_50_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_40_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_30_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_20_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_10_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_10_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_20_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_30_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_40_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_50_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_60_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_70_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_80_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_90_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_100_tno
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_100_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_90_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_80_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_70_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_60_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_50_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_40_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_30_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_20_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_neg_10_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_10_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_20_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_30_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_40_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_50_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_60_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_70_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_80_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_90_tyes
						}
						remove_opinion_modifier = {
							target = FROM
							modifier = TPT_pos_100_tyes
						}
						FROM = {
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_100_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_90_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_80_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_70_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_60_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_50_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_40_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_30_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_20_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_10_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_10_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_20_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_30_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_40_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_50_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_60_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_70_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_80_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_90_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_100_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_100_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_90_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_80_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_70_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_60_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_50_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_40_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_30_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_20_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_10_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_10_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_20_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_30_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_40_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_50_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_60_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_70_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_80_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_90_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_100_tyes
							}
						}
					}
				}
				if = {
					limit = {
						any_country = { has_country_flag = tpt_actor }
					}
					every_country = {
						limit = { has_country_flag = tpt_actor }
						clr_country_flag = tpt_actor
					every_other_country = {
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_100_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_90_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_80_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_70_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_60_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_50_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_40_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_30_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_20_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_10_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_10_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_20_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_30_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_40_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_50_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_60_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_70_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_80_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_90_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_100_tno
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_100_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_90_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_80_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_70_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_60_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_50_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_40_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_30_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_20_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_neg_10_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_10_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_20_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_30_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_40_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_50_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_60_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_70_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_80_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_90_tyes
						}
						remove_opinion_modifier = {
							target = PREV
							modifier = TPT_pos_100_tyes
						}
						PREV = {
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_100_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_90_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_80_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_70_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_60_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_50_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_40_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_30_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_20_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_10_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_10_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_20_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_30_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_40_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_50_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_60_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_70_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_80_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_90_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_100_tno
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_100_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_90_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_80_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_70_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_60_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_50_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_40_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_30_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_20_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_neg_10_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_10_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_20_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_30_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_40_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_50_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_60_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_70_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_80_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_90_tyes
							}
							remove_opinion_modifier = {
								target = PREV
								modifier = TPT_pos_100_tyes
							}
						}
					}
				}
			}
		}
	}
}
	tpt_cw_window = {

		context_type = selected_country_context

		window_name = "tpt_cw_window"

		visible = {
			ROOT = {
				is_ai = no
				has_global_flag = tpt_cw_window_open
			}
		}

		effects = {
			tpt_cw_close_window_click = {
				clr_global_flag = tpt_cw_window_open
			}
			tpt_cw_elites_on_click = {
				set_global_flag = tpt_cw_elites
				clr_global_flag = tpt_cw_intellectuals
				clr_global_flag = tpt_cw_people
				clr_global_flag = tpt_cw_ruler
			}
			tpt_cw_elites_off_click = {
				clr_global_flag = tpt_cw_elites
			}
			tpt_cw_intellectuals_on_click = {
				set_global_flag = tpt_cw_intellectuals
				clr_global_flag = tpt_cw_elites
				clr_global_flag = tpt_cw_people
				clr_global_flag = tpt_cw_ruler
			}
			tpt_cw_intellectuals_off_click = {
				clr_global_flag = tpt_cw_intellectuals
			}
			tpt_cw_people_on_click = {
				set_global_flag = tpt_cw_people
				clr_global_flag = tpt_cw_intellectuals
				clr_global_flag = tpt_cw_elites
				clr_global_flag = tpt_cw_ruler
			}
			tpt_cw_people_off_click = {
				clr_global_flag = tpt_cw_people
			}
			tpt_cw_ruler_on_click = {
				set_global_flag = tpt_cw_ruler
				clr_global_flag = tpt_cw_intellectuals
				clr_global_flag = tpt_cw_elites
				clr_global_flag = tpt_cw_people
			}
			tpt_cw_ruler_off_click = {
				clr_global_flag = tpt_cw_ruler
			}
		}

		triggers = {
			tpt_cw_elites_on_visible = {
				NOT = { has_global_flag = tpt_cw_elites }
			}
			tpt_cw_elites_off_visible = {
				has_global_flag = tpt_cw_elites
			}
			tpt_cw_intellectuals_on_visible = {
				NOT = { has_global_flag = tpt_cw_intellectuals }
			}
			tpt_cw_intellectuals_off_visible = {
				has_global_flag = tpt_cw_intellectuals
			}
			tpt_cw_people_on_visible = {
				NOT = { has_global_flag = tpt_cw_people }
			}
			tpt_cw_people_off_visible = {
				has_global_flag = tpt_cw_people
			}
			tpt_cw_ruler_on_visible = {
				NOT = { has_global_flag = tpt_cw_ruler }
			}
			tpt_cw_ruler_off_visible = {
				has_global_flag = tpt_cw_ruler
			}
		}
	}
}
